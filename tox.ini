[tox]
envlist =
    py37,
    py38


[testenv]
setenv =
    PYTHONPATH = {toxinidir}:{env:PYTHONPATH:}:{toxinidir}/test_django_plugin
passenv = *
deps =
    py37: git+https://github.com/yaml/pyyaml.git
    coverage
    pytest==6.2.*
    pytest-cov
    pytest-django==4.*
    psycopg2
    pytest-tipsi-testing>=1.3.1
    ipdb
	six
commands =
    python setup.py --quiet clean develop
    pytest --cov --ds=test_django_plugin.settings {posargs}
    coverage report -m


[testenv:custom-py38]
commands =
    python setup.py --quiet clean develop
    python -c 'from test_django_plugin.app import apps; print(apps.AppConfig.name)'
    pytest --cov --ds=test_django_plugin.settings --reuse-db {posargs}
    coverage report -m
